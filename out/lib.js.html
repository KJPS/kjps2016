<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: lib.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: lib.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>"use strict";

var renderer;
var stage;
var events = {};
var KEY_DOWN = 83;
var KEY_UP = 87;
var KEY_RIGHT = 68;
var KEY_LEFT = 65;
var KEY_SPACEBAR = 32

/**
 * Sākt spēli.
 *
 * @param {Number} width
 * @param {Number} height
 * @param {Object} options
 */
function init(width, height, options) {
    width = width ? width : 800;
    height = height ? height : 600;

    renderer = new PIXI.WebGLRenderer(width, height, options);
    document.body.appendChild(renderer.view);
    stage = new PIXI.Container();
}

/**
 * Iestatīt animācijas funkciju, kuru izsauc ar ļoti mazu laika starpību.
 *
 * @param {Function} tick
 */
function animate(tick) {
    var fn = function(){
        requestAnimationFrame(fn);
        tick();
        renderer.render(stage);
    };

    fn();
}

/**
 * Zīmēt tekstu.
 *
 * @param {Number} x
 * @param {Number} y
 * @param {String} text
 * @param {Object} style
 *
 * @return PIXI.Text
 */
function text(x, y, text, style) {
    var text = new PIXI.Text(text, style);
    text.position.set(x, y);
    stage.addChild(text);

    return text;
}

/**
 * Zīmēt četrstūri.
 *
 * @param {Number} x
 * @param {Number} y
 * @param {Number} width
 * @param {Number} height
 * @param color
 *
 * @return PIXI.Graphics
 */
function rectangle(x, y, width, height, color) {
    var g = new PIXI.Graphics();
    color = color === undefined ? 0x000000 : color;

    g.beginFill(color);
    g.drawRect(0, 0, width, height);
    g.endFill();
    g.position.set(x, y);

    stage.addChild(g);

    return g;
}

/**
 * Zīmēt trijstūri.
 *
 * @param {Number} x1
 * @param {Number} y1
 * @param {Number} x2
 * @param {Number} y2
 * @param {Number} x3
 * @param {Number} y3
 * @param color
 *
 * @return PIXI.Graphics
 */
function triangle(x1, y1, x2, y2, x3, y3, color) {
    return polygon([
        x1, y1,
        x2, y2,
        x3, y3
    ], color);
}

/**
 * Zīmēt daudzstūri.
 *
 * @param {Array} points
 * @param color
 *
 * @return PIXI.Graphics
 */
function polygon(points, color) {
    var g = new PIXI.Graphics();
    color = color === undefined ? 0x000000 : color;

    var minX = 2000000000, minY = 2000000000;

    for (var i = 0; i &lt; points.length; i += 2) {
        minX = Math.min(minX, points[i]);
        minY = Math.min(minY, points[i + 1]);
    }

    for (var i = 0; i &lt; points.length; i += 2) {
        points[i] -= minX;
        points[i + 1] -= minY;
    }

    g.beginFill(color);
    g.drawPolygon(points);
    g.endFill();
    g.position.set(minX, minY);

    stage.addChild(g);

    return g;
}

/**
 * Zīmēt riņķi.
 *
 * @param {Number} x
 * @param {Number} y
 * @param {Number} radius
 * @param color
 *
 * @return PIXI.Graphics
 */
function circle(x, y, radius, color) {
    var g = new PIXI.Graphics();
    color = color === undefined ? 0x000000 : color;

    g.beginFill(color);
    g.drawCircle(0, 0, radius);
    g.endFill();
    g.position.set(x, y);

    stage.addChild(g);

    return g;
}

/**
 * Zīmēt elipsi.
 *
 * @param {Number} x
 * @param {Number} y
 * @param {Number} width
 * @param {Number} height
 * @param color
 *
 * @return PIXI.Graphics
 */
function elipse(x, y, width, height, color) {
    var g = new PIXI.Graphics();
    color = color === undefined ? 0x000000 : color;

    g.beginFill(color);
    g.drawEllipse(0, 0, width, height);
    g.endFill();
    g.position.set(x, y);

    stage.addChild(g);

    return g;
}

/**
 * Zīmēt attēlu.
 *
 * @param {Number} x
 * @param {Number} y
 * @param {String} url
 *
 * @return PIXI.Sprite
 */
function image(x, y, url) {
    var texture = PIXI.Texture.fromImage(url);
    var sprite = new PIXI.Sprite(texture);
    sprite.position.set(x, y);
    stage.addChild(sprite);

    return sprite;
}

/**
 * Pievienot klikšķa notikumu grafiskajamm elementam.
 *
 * @param {PIXI.Graphics} g
 * @param {Function} fn
 *
 * @return {PIXI.Graphics}
 */
function onClick(g, fn) {
    g.interactive = true;
    g.on('click', fn);

    return g;
}

/**
 * Pārvietot elementu uz pozīciju.
 *
 * @param {PIXI.Graphics} g
 * @param {Number} x
 * @param {Number} y
 *
 * @return {PIXI.Graphics}
 */
function move(g, x, y) {
    g.position.set(x, y);

    return g;
}

/**
 * Pārvietot elementu pa attālumu.
 *
 * @param {PIXI.Graphics} g
 * @param {Number} x
 * @param {Number} y
 *
 * @return {PIXI.Graphics}
 */
function moveBy(g, x, y) {
    return move(g, g.position.x + x, g.position.y + y);
}

/**
 * Izdzēst elementu.
 *
 * @param {PIXI.Graphics} g
 *
 * @return {PIXI.Graphics}
 */
function remove(g) {
    stage.removeChild(g);

    return g;
}

/**
 * Pārbaudīt divu elementu sadursmi.
 *
 * @param {PIXI.Graphics} g1
 * @param {PIXI.Graphics} g2
 *
 * @return {Boolean}
 */
function isCollision(g1, g2) {
    var r1 = g1.getBounds();
    var r2 = g2.getBounds();

    return r1.x &lt;= r2.x + r2.width &amp;&amp; r1.x + r1.width >= r2.x &amp;&amp;
        r1.y &lt;= r2.y + r2.height &amp;&amp; r1.y + r1.height >= r2.y;
}

/**
 * Iespējot elementa vilkšanu.
 *
 * @param {PIXI.Graphics} g
 *
 * @return {PIXI.Graphics}
 */
function draggable(g) {
    g.interactive = true;
    var dragData = null;

    function onDragStart(e) {
        dragData = e.data;
    }

    function onDragMove() {
        if (dragData) {
            var newPosition = dragData.getLocalPosition(stage);
            g.position.set(newPosition.x, newPosition.y);
        }
    }

    function onDragEnd() {
        dragData = null;
    }

    g
        // Drag start
        .on('mousedown', onDragStart)
        .on('touchstart', onDragStart)
        // Drag move
        .on('mousemove', onDragMove)
        .on('touchmove', onDragMove)
        // Drag end
        .on('mouseup', onDragEnd)
        .on('mouseupoutside', onDragEnd)
        .on('touchend', onDragEnd)
        .on('touchendoutside', onDragEnd)
    ;

    return g;
}

/**
 * Pogas nospiešana uz leju.
 *
 * @param {Numeric} key
 * @param {Function} fn
 */
function onKeyDown(key, fn)
{
    if (!events['onkeydown']) {
        events['onkeydown'] = [];
    }

    events['onkeydown'].push(function(e){
        e.which == key &amp;&amp; fn();
    });
}

/**
 * Pogas atlaišana.
 *
 * @param {Numeric} key
 * @param {Function} fn
 */
function onKeyUp(key, fn)
{
    if (!events['onkeyup']) {
        events['onkeyup'] = [];
    }

    events['onkeyup'].push(function(e){
        e.which == key &amp;&amp; fn();
    });
}

document.onkeydown = function(e){
    if (events['onkeydown'] === undefined) {
        return;
    }

    for (var i in events['onkeydown']) {
        events['onkeydown'][i](e);
    }
};

document.onkeyup = function(e){
    if (events['onkeyup'] === undefined) {
        return;
    }

    for (var i in events['onkeyup']) {
        events['onkeyup'][i](e);
    }
};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#animate">animate</a></li><li><a href="global.html#circle">circle</a></li><li><a href="global.html#draggable">draggable</a></li><li><a href="global.html#elipse">elipse</a></li><li><a href="global.html#image">image</a></li><li><a href="global.html#init">init</a></li><li><a href="global.html#isCollision">isCollision</a></li><li><a href="global.html#move">move</a></li><li><a href="global.html#moveBy">moveBy</a></li><li><a href="global.html#onClick">onClick</a></li><li><a href="global.html#onKeyDown">onKeyDown</a></li><li><a href="global.html#onKeyUp">onKeyUp</a></li><li><a href="global.html#polygon">polygon</a></li><li><a href="global.html#rectangle">rectangle</a></li><li><a href="global.html#remove">remove</a></li><li><a href="global.html#text">text</a></li><li><a href="global.html#triangle">triangle</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Mon Jun 06 2016 02:04:18 GMT+0300 (EEST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
